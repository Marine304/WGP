{% extends 'webcrawler/layout.html' %} 
{% block content %}
<h3 class="page-title">Charts</h3>
<div class="row">
    <div class="col-sm-12 col-md-12">
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">성적 그래프</h3>
            </div>
            <div class="panel-body">
                <div id="demo-line-chart" class="ct-chart"></div>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-md-12">
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Bar Chart</h3>
            </div>
            <div class="panel-body">
                <div id="demo-bar-chart" class="ct-chart"></div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-6 col-md-12">
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Area Chart</h3>
            </div>
            <div class="panel-body">
                <div id="demo-area-chart" class="ct-chart"></div>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-md-12">
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Multiple Chart</h3>
            </div>
            <div class="panel-body">
                <div id="multiple-chart" class="ct-chart"></div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        var options;
        var x_labels = [];
        var y_series = [];

        {% for point in average_point_info %}
            year = "{{ point.0 }}";
            grade = "{{ point.1 }}";
            semester = "{{ point.2 }}";
            point = "{{ point.3 }}";
            x_labels.push(year.substring(2)+"년 "+grade+"학년 "+semester+"학기");
            y_series.push(point);
        {% endfor %}

        console.log(x_labels);
        console.log(y_series);
        

        var data = {
            labels: [...x_labels],
            series: [
                [...y_series],
            ]
        };

        // line chart
        options = {
            height: "300px",
            showPoint: true,
            axisX: {
                showGrid: false
            },
            lineSmooth: false,
        };

        new Chartist.Line('#demo-line-chart', data, options);

        // bar chart
        options = {
            height: "300px",
            axisX: {
                showGrid: false
            },
        };

        new Chartist.Bar('#demo-bar-chart', data, options);


        // area chart
        options = {
            height: "270px",
            showArea: true,
            showLine: false,
            showPoint: false,
            axisX: {
                showGrid: false
            },
            lineSmooth: false,
        };

        new Chartist.Line('#demo-area-chart', data, options);


        // multiple chart
        var data = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            series: [{
                name: 'series-real',
                data: [200, 380, 350, 320, 410, 450, 570, 400, 555, 620, 750, 900],
            }, {
                name: 'series-projection',
                data: [240, 350, 360, 380, 400, 450, 480, 523, 555, 600, 700, 800],
            }]
        };

        var options = {
            fullWidth: true,
            lineSmooth: false,
            height: "270px",
            low: 0,
            high: 'auto',
            series: {
                'series-projection': {
                    showArea: true,
                    showPoint: false,
                    showLine: false
                },
            },
            axisX: {
                showGrid: false,

            },
            axisY: {
                showGrid: false,
                onlyInteger: true,
                offset: 0,
            },
            chartPadding: {
                left: 20,
                right: 20
            }
        };

        new Chartist.Line('#multiple-chart', data, options);

    });
</script>
{% endblock %}
